{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: `53545737-19e7b42de62d4244a4b01f9cf`,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: PER_PAGE,\n        },\n    });\n\n    return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            img => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${img.webformatURL}\"\n          alt=\"${img.tags}\"\n          loading=\"lazy\"\n        />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes:</b> ${img.likes}</p>\n        <p class=\"info-item\"><b>Views:</b> ${img.views}</p>\n        <p class=\"info-item\"><b>Comments:</b> ${img.comments}</p>\n        <p class=\"info-item\"><b>Downloads:</b> ${img.downloads}</p>\n      </div>\n    </li>`\n        )\n        .join('');\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.add('is-visible');\n}\n\nexport function hideLoader() {\n    loader.classList.remove('is-visible');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.add('is-visible');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.remove('is-visible');\n}","import { getImagesByQuery, PER_PAGE } from './js/pixabay-api.js';\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nhideLoadMoreButton();\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const query = e.currentTarget.elements.search.value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            message: 'Search field must be filled',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    searchQuery = query;\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(searchQuery, page);\n        totalHits = data.totalHits;\n\n        hideLoader();\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                message: 'Images do not found. Try search something else.',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        iziToast.success({\n            message: `Find ${totalHits} images`,\n            position: 'topRight',\n        });\n\n        if (data.hits.length < PER_PAGE) {\n            iziToast.info({\n                message: \"You've reached the end of search results.\",\n                position: 'topRight',\n            });\n            hideLoadMoreButton();\n            return;\n        }\n\n        showLoadMoreButton();\n    } catch (error) {\n        hideLoader();\n        iziToast.error({\n            message: 'Error image load',\n            position: 'topRight',\n        });\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(searchQuery, page);\n\n        createGallery(data.hits);\n        hideLoader();\n\n        const firstCard = document.querySelector('.gallery a');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n\n        const loadedImages = page * PER_PAGE;\n        if (loadedImages >= totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"You've reached the end of search results.\",\n                position: 'topRight',\n            });\n            return;\n        }\n\n        showLoadMoreButton();\n    } catch (error) {\n        hideLoader();\n        iziToast.error({\n            message: 'Error image load',\n            position: 'topRight',\n        });\n    }\n});"],"names":["PER_PAGE","getImagesByQuery","query","page","axios","galleryContainer","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchQuery","totalHits","e","iziToast","data","firstCard","cardHeight"],"mappings":"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"}