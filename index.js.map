{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page = 1) {\n    const API_KEY = '53545737-19e7b42de62d4244a4b01f9cf';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    };\n\n    try {\n        const res = await axios.get(BASE_URL, { params });\n        return res.data;\n    } catch (error) {\n        console.error('Помилка при запиті до Pixabay:', error);\n        return { hits: [], totalHits: 0 };\n    }\n}\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loadMoreBtn = document.querySelector('.js-btn');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nlet lightbox = null;\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <ul class=\"stats\">\n            <li class=\"stats-item\">\n              <span class=\"stats-label\">Likes</span>\n              <span class=\"stats-value\">${likes}</span>\n            </li>\n            <li class=\"stats-item\">\n              <span class=\"stats-label\">Views</span>\n              <span class=\"stats-value\">${views}</span>\n            </li>\n            <li class=\"stats-item\">\n              <span class=\"stats-label\">Comments</span>\n              <span class=\"stats-value\">${comments}</span>\n            </li>\n            <li class=\"stats-item\">\n              <span class=\"stats-label\">Downloads</span>\n              <span class=\"stats-value\">${downloads}</span>\n            </li>\n          </ul>\n        </li>\n    `\n        )\n        .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (lightbox) {\n        lightbox.destroy();\n    }\n\n    lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n    });\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n    if (lightbox) {\n        lightbox.destroy();\n        lightbox = null;\n    }\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('hidden');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions.js';\n\nconst formElement = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.js-btn');\n\nconst PAGE_SIZE = 15;\nlet totalPages = 0;\nlet query = '';\nlet currentPage = 0;\n\n// --- Пошук ---\nformElement.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n    query = formData.get('search-text').trim();\n\n    if (!query) {\n        iziToast.error({\n            message: 'Please enter a search query',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n    currentPage = 1;\n\n    try {\n        const res = await getImagesByQuery(query, currentPage);\n        const { hits, totalHits } = res;\n        totalPages = Math.ceil(totalHits / PAGE_SIZE);\n\n        if (hits.length === 0) {\n            iziToast.error({\n                message: 'No images found. Try another query.',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(hits);\n        checkBtnStatus();\n    } catch (error) {\n        iziToast.error({\n            message: 'Request failed. Please try again.',\n            position: 'topRight',\n        });\n        console.error(error);\n    } finally {\n        hideLoader();\n        e.target.reset();\n    }\n});\n\n// --- Load More ---\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const res = await getImagesByQuery(query, currentPage);\n        if (res.hits.length > 0) {\n            createGallery(res.hits);\n            checkBtnStatus();\n            smoothScroll();\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'Failed to load more images. Please try again.',\n            position: 'topRight',\n        });\n        console.error(error);\n        if (currentPage < totalPages) showLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n});\n\n// --- Плавне скролювання ---\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (!galleryItem) return;\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n// --- Статус кнопки Load More ---\nfunction checkBtnStatus() {\n    if (currentPage < totalPages) {\n        showLoadMoreButton();\n    } else {\n        hideLoadMoreButton();\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results\",\n            position: 'topRight',\n        });\n    }\n}"],"names":["getImagesByQuery","query","page","API_KEY","BASE_URL","params","axios","error","loadMoreBtn","gallery","loader","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElement","PAGE_SIZE","totalPages","currentPage","e","iziToast","res","hits","totalHits","checkBtnStatus","smoothScroll","galleryItem","cardHeight"],"mappings":"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"}